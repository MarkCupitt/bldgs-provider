var BLDGS=function(){function a(a,b){if(c.has(a))return void(b&&setTimeout(function(){b(c.get(a))},0));var d=new XMLHttpRequest;return d.onreadystatechange=function(){if(4===d.readyState&&!(!d.status||d.status<200||d.status>299)&&b&&d.responseText){var e;try{e=JSON.parse(d.responseText)}catch(f){}c.set(a,e),b(e)}},d.open("GET",a),d.send(null),d}function b(a){a=a||{},this._minZoom=void 0!==a.minZoom?a.minZoom:14,this._maxZoom=a.maxZoom||1/0,d+=a.key||"anonymous",void 0!==a.cacheSize&&c.setSize(a.cacheSize)}var c={data:{},index:[],totalSize:0,maxSize:1048576,setSize:function(a){this.maxSize=a},set:function(a,b){this.data[a]=b;var c=(""+b).length;this.index.push({key:a,size:c}),this.totalSize+=c,this.purge()},get:function(a){return this.data[a]},has:function(a){return void 0!==this.data[a]},purge:function(){setTimeout(function(){for(;c.totalSize>c.maxSize;){var a=c.index.shift();c.totalSize-=a.size,delete c.data[a.key]}},0)},clear:function(){this.data={},this.index=[],this.totalSize=0}},d="http://data.osmbuildings.org/0.2/";return b.TILE_SIZE=256,b.ATTRIBUTION='Data Service &copy; <a href="http://bld.gs">BLDGS</a>',b.prototype={getTile:function(b,c,e,f){if(e<this._minZoom||e>this._maxZoom)return setTimeout(f,0),{abort:function(){}};var g=d+"/tile/"+e+"/"+b+"/"+c+".json";return a(g,f)},getFeature:function(b,c){var e=d+"/feature/"+b+".json";return a(e,c)},getBBox:function(b,c,e,f,g){var h=d+"/bbox.json?bbox="+[b.toFixed(5),c.toFixed(5),e.toFixed(5),f.toFixed(5)].join(",");return a(h,g)},destroy:function(){c.clear()}},b}(this);